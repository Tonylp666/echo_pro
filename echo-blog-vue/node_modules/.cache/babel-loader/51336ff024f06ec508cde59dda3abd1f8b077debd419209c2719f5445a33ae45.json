{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"crawler-rule-container\"\n};\nconst _hoisted_2 = {\n  class: \"page-header\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_radio = _resolveComponent(\"el-radio\");\n  const _component_el_radio_group = _resolveComponent(\"el-radio-group\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, _toDisplayString($setup.isEdit ? '编辑爬虫规则' : '创建爬虫规则'), 1 /* TEXT */), _createVNode(_component_el_button, {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/crawler'))\n  }, {\n    default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"返回列表\")])),\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_el_form, {\n    model: $setup.ruleForm,\n    rules: $setup.rules,\n    ref: \"ruleFormRef\",\n    \"label-width\": \"120px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"规则名称\",\n      prop: \"ruleName\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.ruleName,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.ruleForm.ruleName = $event),\n        placeholder: \"请输入规则名称\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"目标网站URL\",\n      prop: \"targetUrl\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.targetUrl,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.ruleForm.targetUrl = $event),\n        placeholder: \"请输入目标网站URL\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"列表选择器\",\n      prop: \"listSelector\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.listSelector,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.ruleForm.listSelector = $event),\n        placeholder: \"请输入列表选择器，例如：.list-item\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"标题选择器\",\n      prop: \"titleSelector\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.titleSelector,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.ruleForm.titleSelector = $event),\n        placeholder: \"请输入标题选择器，例如：.title\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"内容选择器\",\n      prop: \"contentSelector\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.contentSelector,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.ruleForm.contentSelector = $event),\n        placeholder: \"请输入内容选择器，例如：.content\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"日期选择器\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.dateSelector,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.ruleForm.dateSelector = $event),\n        placeholder: \"请输入日期选择器，例如：.date\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"作者选择器\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.authorSelector,\n        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.ruleForm.authorSelector = $event),\n        placeholder: \"请输入作者选择器，例如：.author\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"请求头\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.ruleForm.headers,\n        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.ruleForm.headers = $event),\n        type: \"textarea\",\n        rows: 4,\n        placeholder: \"请输入请求头，JSON格式，例如：{'User-Agent': 'Mozilla/5.0'}\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"状态\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_radio_group, {\n        modelValue: $setup.ruleForm.status,\n        \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $setup.ruleForm.status = $event)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_radio, {\n          label: \"ENABLED\"\n        }, {\n          default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"启用\")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_radio, {\n          label: \"DISABLED\"\n        }, {\n          default: _withCtx(() => _cache[12] || (_cache[12] = [_createTextVNode(\"禁用\")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $setup.submitForm\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.isEdit ? '保存' : '创建'), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        onClick: $setup.resetForm\n      }, {\n        default: _withCtx(() => _cache[13] || (_cache[13] = [_createTextVNode(\"重置\")])),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","$setup","isEdit","_createVNode","_component_el_button","onClick","_cache","$event","_ctx","$router","push","default","_withCtx","_createTextVNode","_","_component_el_form","model","ruleForm","rules","ref","_component_el_form_item","label","prop","_component_el_input","modelValue","ruleName","placeholder","targetUrl","listSelector","titleSelector","contentSelector","dateSelector","authorSelector","headers","type","rows","_component_el_radio_group","status","_component_el_radio","submitForm","resetForm"],"sources":["/Users/ls/echo_pro/echo-blog-vue/src/views/crawler/rule.vue"],"sourcesContent":["<template>\n  <div class=\"crawler-rule-container\">\n    <div class=\"page-header\">\n      <h2>{{ isEdit ? '编辑爬虫规则' : '创建爬虫规则' }}</h2>\n      <el-button @click=\"$router.push('/crawler')\">返回列表</el-button>\n    </div>\n    \n    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleFormRef\" label-width=\"120px\">\n      <el-form-item label=\"规则名称\" prop=\"ruleName\">\n        <el-input v-model=\"ruleForm.ruleName\" placeholder=\"请输入规则名称\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"目标网站URL\" prop=\"targetUrl\">\n        <el-input v-model=\"ruleForm.targetUrl\" placeholder=\"请输入目标网站URL\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"列表选择器\" prop=\"listSelector\">\n        <el-input v-model=\"ruleForm.listSelector\" placeholder=\"请输入列表选择器，例如：.list-item\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"标题选择器\" prop=\"titleSelector\">\n        <el-input v-model=\"ruleForm.titleSelector\" placeholder=\"请输入标题选择器，例如：.title\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"内容选择器\" prop=\"contentSelector\">\n        <el-input v-model=\"ruleForm.contentSelector\" placeholder=\"请输入内容选择器，例如：.content\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"日期选择器\">\n        <el-input v-model=\"ruleForm.dateSelector\" placeholder=\"请输入日期选择器，例如：.date\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"作者选择器\">\n        <el-input v-model=\"ruleForm.authorSelector\" placeholder=\"请输入作者选择器，例如：.author\"></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"请求头\">\n        <el-input\n          v-model=\"ruleForm.headers\"\n          type=\"textarea\"\n          :rows=\"4\"\n          placeholder=\"请输入请求头，JSON格式，例如：{'User-Agent': 'Mozilla/5.0'}\"\n        ></el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"状态\">\n        <el-radio-group v-model=\"ruleForm.status\">\n          <el-radio label=\"ENABLED\">启用</el-radio>\n          <el-radio label=\"DISABLED\">禁用</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      \n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm\">{{ isEdit ? '保存' : '创建' }}</el-button>\n        <el-button @click=\"resetForm\">重置</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive, computed, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'CrawlerRule',\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const ruleFormRef = ref(null)\n    \n    const ruleForm = reactive({\n      ruleName: '',\n      targetUrl: '',\n      listSelector: '',\n      titleSelector: '',\n      contentSelector: '',\n      dateSelector: '',\n      authorSelector: '',\n      headers: '',\n      status: 'ENABLED'\n    })\n    \n    const rules = {\n      ruleName: [\n        { required: true, message: '请输入规则名称', trigger: 'blur' },\n        { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n      ],\n      targetUrl: [\n        { required: true, message: '请输入目标网站URL', trigger: 'blur' }\n      ],\n      listSelector: [\n        { required: true, message: '请输入列表选择器', trigger: 'blur' }\n      ],\n      titleSelector: [\n        { required: true, message: '请输入标题选择器', trigger: 'blur' }\n      ],\n      contentSelector: [\n        { required: true, message: '请输入内容选择器', trigger: 'blur' }\n      ]\n    }\n    \n    const isEdit = computed(() => {\n      return route.query.id !== undefined\n    })\n    \n    // 获取规则详情\n    const fetchRuleDetail = (id) => {\n      // 模拟API请求\n      setTimeout(() => {\n        Object.assign(ruleForm, {\n          ruleName: '知乎热门',\n          targetUrl: 'https://www.zhihu.com/hot',\n          listSelector: '.HotItem',\n          titleSelector: '.HotItem-title',\n          contentSelector: '.HotItem-excerpt',\n          dateSelector: '',\n          authorSelector: '',\n          headers: '{\"User-Agent\": \"Mozilla/5.0\"}',\n          status: 'ENABLED'\n        })\n      }, 500)\n    }\n    \n    const submitForm = async () => {\n      if (!ruleFormRef.value) return\n      \n      await ruleFormRef.value.validate((valid) => {\n        if (valid) {\n          // 模拟API请求\n          setTimeout(() => {\n            ElMessage.success(isEdit.value ? '规则更新成功' : '规则创建成功')\n            router.push('/crawler')\n          }, 500)\n        }\n      })\n    }\n    \n    const resetForm = () => {\n      if (ruleFormRef.value) {\n        ruleFormRef.value.resetFields()\n      }\n    }\n    \n    onMounted(() => {\n      if (isEdit.value) {\n        fetchRuleDetail(route.query.id)\n      }\n    })\n    \n    return {\n      ruleFormRef,\n      ruleForm,\n      rules,\n      isEdit,\n      submitForm,\n      resetForm\n    }\n  }\n}\n</script>\n\n<style scoped>\n.crawler-rule-container {\n  padding: 20px;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}